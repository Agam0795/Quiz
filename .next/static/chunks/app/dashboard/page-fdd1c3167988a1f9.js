(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{36162:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6874,23)),Promise.resolve().then(t.bind(t,74189)),Promise.resolve().then(t.bind(t,81063))},74189:(e,r,t)=>{"use strict";t.d(r,{DashboardClient:()=>j});var i=t(95155),s=t(12115),l=t(6874),a=t.n(l),n=t(30285),o=t(16923),c=t(68718),d=t(34301),u=t(87668),h=t(87481),f=t(93004),v=t(56104),p=t(34477);let m=(0,p.createServerReference)("40a04a9e61693bec25d51c8b1b908eeb2c5546e343",p.callServer,void 0,p.findSourceMapURL,"getQuizzesByAuthor"),x=(0,p.createServerReference)("60e986065f8f256bd456e62eae5d980cd08b1392cb",p.callServer,void 0,p.findSourceMapURL,"deleteQuiz");var z=t(68856);function j(){let[e,r]=(0,s.useState)([]),[t,l]=(0,s.useState)(!0),[p,j]=(0,s.useState)(null),{toast:b}=(0,h.dj)(),y=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=(0,f.hg)(v.j2,async e=>{if(j(e),e){l(!0);try{let t=await m(e.uid);r(t)}catch(e){console.error(e),b({variant:"destructive",title:"Error",description:"Could not fetch your quizzes."})}finally{l(!1)}}else r([]),l(!1)});return()=>e()},[b]);let g=async t=>{if(!p)return void b({variant:"destructive",title:"Not Authenticated"});r(e.filter(e=>e.id!==t));try{await x(t,p.uid),b({title:"Quiz Deleted",description:"The quiz has been successfully deleted."})}catch(t){r(e),console.error(t),b({variant:"destructive",title:"Error deleting quiz",description:"Could not delete the quiz. Please try again."})}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-4xl font-bold font-headline",children:"My Quizzes"}),(0,i.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage, share, and view your quizzes."})]}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,i.jsxs)(n.$,{variant:"outline",onClick:()=>{var e;null==(e=y.current)||e.click()},children:[(0,i.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Import"]}),(0,i.jsxs)(n.$,{variant:"outline",onClick:()=>{if(0===e.length)return void b({variant:"destructive",title:"Export Failed",description:"There are no quizzes to export."});let r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(r),i=document.createElement("a");i.href=t,i.download="quizzes-export.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t),b({title:"Export Successful",description:"Your quizzes have been exported to quizzes-export.json."})},children:[(0,i.jsx)(c.A,{className:"mr-2 h-4 w-4"})," Export All"]}),(0,i.jsx)(n.$,{asChild:!0,children:(0,i.jsxs)(a(),{href:"/create-quiz",children:[(0,i.jsx)(d.A,{className:"mr-2 h-4 w-4"})," Create Quiz"]})}),(0,i.jsx)("input",{type:"file",ref:y,onChange:e=>{var t;let i=null==(t=e.target.files)?void 0:t[0];if(!i)return;let s=new FileReader;s.onload=e=>{try{var t;let i=null==(t=e.target)?void 0:t.result;if("string"!=typeof i)throw Error("File could not be read");let s=JSON.parse(i);if(!Array.isArray(s)||s.some(e=>!e.id||!e.title||!e.questions))throw Error("Invalid quiz file format. Please ensure it's an array of quizzes.");r(e=>[...e,...s]),b({title:"Import Successful",description:"".concat(s.length," quizzes have been imported. Note: Imported quizzes are not saved to your account.")})}catch(e){console.error("Import error:",e),b({variant:"destructive",title:"Import Failed",description:e instanceof Error?e.message:"An unknown error occurred."})}finally{y.current&&(y.current.value="")}},s.readAsText(i)},accept:".json",className:"hidden"})]})]}),t?(0,i.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,i.jsx)(z.E,{className:"h-48 w-full"}),(0,i.jsx)(z.E,{className:"h-48 w-full"}),(0,i.jsx)(z.E,{className:"h-48 w-full"})]}):(0,i.jsx)(u.k,{quizzes:e,onDelete:g})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,644,172,328,240,145,305,444,668,441,684,358],()=>r(36162)),_N_E=e.O()}]);