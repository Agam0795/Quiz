(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[871],{1433:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6874,23)),Promise.resolve().then(s.bind(s,62269)),Promise.resolve().then(s.bind(s,81063))},30356:(e,t,s)=>{"use strict";s.d(t,{C:()=>d,z:()=>o});var r=s(95155),a=s(12115),n=s(75122),l=s(70154),i=s(59434);let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.bL,{className:(0,i.cn)("grid gap-2",s),...a,ref:t})});o.displayName=n.bL.displayName;let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.q7,{ref:t,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,r.jsx)(n.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=n.q7.displayName},54165:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>u,Es:()=>x,L3:()=>f,c7:()=>m,lG:()=>o,rr:()=>p});var r=s(95155),a=s(12115),n=s(45821),l=s(25318),i=s(59434);let o=n.bL;n.l9;let d=n.ZL;n.bm;let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a})});c.displayName=n.hJ.displayName;let u=a.forwardRef((e,t)=>{let{className:s,children:a,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[a,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.UC.displayName;let m=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};m.displayName="DialogHeader";let x=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="DialogFooter";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...a})});f.displayName=n.hE.displayName;let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});p.displayName=n.VY.displayName},62269:(e,t,s)=>{"use strict";s.d(t,{CreateQuizForm:()=>P});var r=s(95155),a=s(90221),n=s(62177),l=s(55594),i=s(12115),o=s(66634),d=s(59434),c=s(85057);let u=n.Op,m=i.createContext({}),x=e=>{let{...t}=e;return(0,r.jsx)(m.Provider,{value:{name:t.name},children:(0,r.jsx)(n.xI,{...t})})},f=()=>{let e=i.useContext(m),t=i.useContext(p),{getFieldState:s,formState:r}=(0,n.xW)(),a=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...a}},p=i.createContext({}),h=i.forwardRef((e,t)=>{let{className:s,...a}=e,n=i.useId();return(0,r.jsx)(p.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:t,className:(0,d.cn)("space-y-2",s),...a})})});h.displayName="FormItem";let j=i.forwardRef((e,t)=>{let{className:s,...a}=e,{error:n,formItemId:l}=f();return(0,r.jsx)(c.J,{ref:t,className:(0,d.cn)(n&&"text-destructive",s),htmlFor:l,...a})});j.displayName="FormLabel";let b=i.forwardRef((e,t)=>{let{...s}=e,{error:a,formItemId:n,formDescriptionId:l,formMessageId:i}=f();return(0,r.jsx)(o.DX,{ref:t,id:n,"aria-describedby":a?"".concat(l," ").concat(i):"".concat(l),"aria-invalid":!!a,...s})});b.displayName="FormControl";let g=i.forwardRef((e,t)=>{let{className:s,...a}=e,{formDescriptionId:n}=f();return(0,r.jsx)("p",{ref:t,id:n,className:(0,d.cn)("text-sm text-muted-foreground",s),...a})});g.displayName="FormDescription";let N=i.forwardRef((e,t)=>{var s;let{className:a,children:n,...l}=e,{error:i,formMessageId:o}=f(),c=i?String(null!=(s=null==i?void 0:i.message)?s:""):n;return c?(0,r.jsx)("p",{ref:t,id:o,className:(0,d.cn)("text-sm font-medium text-destructive",a),...l,children:c}):null});N.displayName="FormMessage";var v=s(62523),y=s(30285);let w=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a})});w.displayName="Textarea";var C=s(66695),q=s(74601),R=s(77223),k=s(34301),z=s(50172),A=s(30356),S=s(87481),I=s(54165),Q=s(34477);let T=(0,Q.createServerReference)("4031735996261e47342976da0fec71842eb1672d67",Q.callServer,void 0,Q.findSourceMapURL,"suggestQuizQuestions");var F=s(89051);let L=i.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(F.bL,{ref:t,className:(0,d.cn)("relative overflow-hidden",s),...n,children:[(0,r.jsx)(F.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,r.jsx)(O,{}),(0,r.jsx)(F.OK,{})]})});L.displayName=F.bL.displayName;let O=i.forwardRef((e,t)=>{let{className:s,orientation:a="vertical",...n}=e;return(0,r.jsx)(F.VM,{ref:t,orientation:a,className:(0,d.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,r.jsx)(F.lr,{className:"relative flex-1 rounded-full bg-border"})})});O.displayName=F.VM.displayName;let V=l.Ik({topic:l.Yj().min(3,"Topic must be at least 3 characters long.")});function E(e){let{open:t,onOpenChange:s,onAddQuestions:l}=e,{toast:o}=(0,S.dj)(),[d,c]=(0,i.useState)(!1),[m,f]=(0,i.useState)([]),p=(0,n.mN)({resolver:(0,a.u)(V),defaultValues:{topic:""}}),g=async e=>{c(!0),f([]);try{let t=await T({topic:e.topic});f(t.questions)}catch(e){console.error("AI suggestion error:",e),o({variant:"destructive",title:"Error",description:"Failed to get suggestions. Please try again."})}finally{c(!1)}};return(0,r.jsx)(I.lG,{open:t,onOpenChange:s,children:(0,r.jsxs)(I.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(I.c7,{children:[(0,r.jsxs)(I.L3,{className:"font-headline flex items-center",children:[(0,r.jsx)(q.A,{className:"mr-2 h-5 w-5 text-accent"}),"AI Question Generator"]}),(0,r.jsx)(I.rr,{children:"Enter a topic, and we'll generate some questions, options, and answers for you."})]}),(0,r.jsx)(u,{...p,children:(0,r.jsxs)("form",{onSubmit:p.handleSubmit(g),className:"space-y-4",children:[(0,r.jsx)(x,{control:p.control,name:"topic",render:e=>{let{field:t}=e;return(0,r.jsxs)(h,{children:[(0,r.jsx)(j,{children:"Quiz Topic"}),(0,r.jsx)(b,{children:(0,r.jsx)(v.p,{placeholder:"e.g., The Solar System",...t})}),(0,r.jsx)(N,{})]})}}),(0,r.jsxs)(y.$,{type:"submit",disabled:d,className:"w-full",children:[d&&(0,r.jsx)(z.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Generate Questions"]})]})}),m.length>0&&(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Suggested Questions:"}),(0,r.jsx)(L,{className:"h-40 w-full rounded-md border p-4",children:(0,r.jsx)("ul",{className:"space-y-2",children:m.map((e,t)=>(0,r.jsx)("li",{className:"text-sm",children:e.questionText},t))})})]}),(0,r.jsxs)(I.Es,{children:[(0,r.jsx)(y.$,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,r.jsx)(y.$,{type:"button",onClick:()=>{m.length>0&&l(m)},disabled:0===m.length,children:"Add to Quiz"})]})]})})}var Y=s(35695),M=s(56104);let $=(0,Q.createServerReference)("609b1678ae8e4879e8cbf5d812f74ea8e67a5d7600",Q.callServer,void 0,Q.findSourceMapURL,"createQuiz"),D=l.Ik({title:l.Yj().min(3,"Title must be at least 3 characters long."),description:l.Yj().optional(),timeLimit:l.vk(e=>""===e?void 0:e,l.au.number().positive("Time limit must be a positive number.").optional()),questions:l.YO(l.Ik({questionText:l.Yj().min(1,"Question cannot be empty."),options:l.YO(l.Ik({text:l.Yj().min(1,"Option cannot be empty.")})).min(2,"Must have at least two options."),correctAnswerIndex:l.au.number().min(0,"Please select a correct answer.")})).min(1,"Must have at least one question.")});function P(){let e=(0,Y.useRouter)(),{toast:t}=(0,S.dj)(),[s,l]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),c=(0,n.mN)({resolver:(0,a.u)(D),defaultValues:{title:"",description:"",questions:[{questionText:"",options:[{text:""},{text:""}],correctAnswerIndex:-1}]}}),{fields:m,append:f,remove:p}=(0,n.jz)({control:c.control,name:"questions"});async function I(s){d(!0);let r=M.j2.currentUser;if(!r){t({variant:"destructive",title:"Not Authenticated",description:"You must be logged in to create a quiz."}),d(!1);return}try{await $(s,r.uid),t({title:"Quiz Saved!",description:"Your new quiz has been created successfully."}),e.push("/dashboard")}catch(e){console.error(e),t({variant:"destructive",title:"Error",description:"Failed to save the quiz. Please try again."})}finally{d(!1)}}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{...c,children:(0,r.jsxs)("form",{onSubmit:c.handleSubmit(I),className:"space-y-8",children:[(0,r.jsxs)(C.Zp,{children:[(0,r.jsx)(C.aR,{children:(0,r.jsx)(C.ZB,{className:"font-headline",children:"Quiz Details"})}),(0,r.jsxs)(C.Wu,{className:"space-y-4",children:[(0,r.jsx)(x,{control:c.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(h,{children:[(0,r.jsx)(j,{children:"Quiz Title"}),(0,r.jsx)(b,{children:(0,r.jsx)(v.p,{placeholder:"e.g., The Ultimate Science Quiz",...t,disabled:o})}),(0,r.jsx)(N,{})]})}}),(0,r.jsx)(x,{control:c.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(h,{children:[(0,r.jsx)(j,{children:"Description"}),(0,r.jsx)(b,{children:(0,r.jsx)(w,{placeholder:"A brief description of your quiz.",...t,disabled:o})}),(0,r.jsx)(N,{})]})}}),(0,r.jsx)(x,{control:c.control,name:"timeLimit",render:e=>{let{field:t}=e;return(0,r.jsxs)(h,{children:[(0,r.jsx)(j,{children:"Time Limit (in seconds)"}),(0,r.jsx)(b,{children:(0,r.jsx)(v.p,{type:"number",placeholder:"e.g., 180 for 3 minutes",...t,disabled:o})}),(0,r.jsx)(g,{children:"Leave blank for no time limit."}),(0,r.jsx)(N,{})]})}})]})]}),(0,r.jsxs)(C.Zp,{children:[(0,r.jsx)(C.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(C.ZB,{className:"font-headline",children:"Questions"}),(0,r.jsxs)(y.$,{type:"button",variant:"ghost",onClick:()=>l(!0),disabled:o,children:[(0,r.jsx)(q.A,{className:"mr-2 h-4 w-4"})," Suggest with AI"]})]})}),(0,r.jsxs)(C.Wu,{className:"space-y-6",children:[m.map((e,t)=>(0,r.jsxs)("div",{className:"p-4 border rounded-lg relative space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h4",{className:"font-semibold",children:["Question ",t+1]}),m.length>1&&(0,r.jsx)(y.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>p(t),disabled:o,children:(0,r.jsx)(R.A,{className:"h-4 w-4"})})]}),(0,r.jsx)(x,{control:c.control,name:"questions.".concat(t,".questionText"),render:e=>{let{field:t}=e;return(0,r.jsxs)(h,{children:[(0,r.jsx)(j,{children:"Question Text"}),(0,r.jsx)(b,{children:(0,r.jsx)(v.p,{placeholder:"What is the capital of France?",...t,disabled:o})}),(0,r.jsx)(N,{})]})}}),(0,r.jsx)(Z,{nestIndex:t,isSubmitting:o,control:c.control,register:c.register}),(0,r.jsx)(x,{control:c.control,name:"questions.".concat(t,".correctAnswerIndex"),render:e=>{var s;let{field:a}=e;return(0,r.jsxs)(h,{className:"space-y-3",children:[(0,r.jsx)(j,{children:"Mark Correct Answer"}),(0,r.jsx)(b,{children:(0,r.jsx)(A.z,{onValueChange:e=>a.onChange(parseInt(e,10)),value:null==(s=a.value)?void 0:s.toString(),className:"flex flex-col space-y-1",disabled:o,children:(c.watch("questions.".concat(t,".options"))||[]).map((e,t)=>(0,r.jsxs)(h,{className:"flex items-center space-x-3 space-y-0",children:[(0,r.jsx)(b,{children:(0,r.jsx)(A.C,{value:t.toString()})}),(0,r.jsx)(j,{className:"font-normal",children:"Option ".concat(t+1)})]},t))})}),(0,r.jsx)(N,{})]})}})]},e.id)),(0,r.jsxs)(y.$,{type:"button",variant:"outline",onClick:()=>f({questionText:"",options:[{text:""},{text:""}],correctAnswerIndex:-1}),disabled:o,children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"})," Add Question"]})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(y.$,{type:"submit",size:"lg",disabled:o,children:[o&&(0,r.jsx)(z.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Quiz"]})})]})}),(0,r.jsx)(E,{open:s,onOpenChange:l,onAddQuestions:e=>{let s=c.getValues("questions"),r=e.map(e=>({questionText:e.questionText,options:e.options.map(e=>({text:e})),correctAnswerIndex:e.correctAnswerIndex}));1!==s.length||s[0].questionText?c.setValue("questions",[...s,...r],{shouldValidate:!0}):c.setValue("questions",r,{shouldValidate:!0}),l(!1),t({title:"Questions Added",description:"".concat(e.length," question(s) have been added to your quiz.")})}})]})}function Z(e){var t;let{nestIndex:s,control:a,isSubmitting:l}=e,{fields:i,append:o,remove:d}=(0,n.jz)({control:a,name:"questions.".concat(s,".options")});return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(j,{children:"Options"}),i.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(x,{control:a,name:"questions.".concat(s,".options.").concat(t,".text"),render:e=>{let{field:s}=e;return(0,r.jsx)(b,{children:(0,r.jsx)(v.p,{...s,placeholder:"Option ".concat(t+1),disabled:l})})}}),i.length>2&&(0,r.jsx)(y.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>d(t),disabled:l,children:(0,r.jsx)(R.A,{className:"h-4 w-4"})})]},e.id)),(0,r.jsx)(N,{children:null==(t=a.getFieldState("questions.".concat(s,".options")).error)?void 0:t.message}),(0,r.jsxs)(y.$,{type:"button",variant:"ghost",size:"sm",className:"mt-2",onClick:()=>o({text:""}),disabled:l,children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"})," Add Option"]})]})}},62523:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var r=s(95155),a=s(12115),n=s(59434);let l=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"},66695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var r=s(95155),a=s(12115),n=s(59434);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-md",s),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},85057:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var r=s(95155),a=s(12115),n=s(40968),l=s(74466),i=s(59434);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,i.cn)(o(),s),...a})});d.displayName=n.b.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,172,328,240,145,931,444,441,684,358],()=>t(1433)),_N_E=e.O()}]);